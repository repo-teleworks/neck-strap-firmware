C51 COMPILER V7.20   P2P_DEMO_FWD_MENU                                                     01/15/2014 19:23:23 PAGE 1   


C51 COMPILER V7.20, COMPILATION OF MODULE P2P_DEMO_FWD_MENU
OBJECT MODULE PLACED IN p2p_demo_fwd_menu.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\c51.exe p2p_demo_fwd_menu.c DB OE BR DF(SI1000MB_SI1000,FREQUENCY_BAND_434,TRANSCEI
                    -VER_OPERATION,FOUR_CHANNEL_IS_USED,EXTENDED_PACKET_FORMAT,PACKET_FORWARDING_SUPPORTED,TRACE_ENABLED) INCDIR(..\..\bsp;..
                    -\..\stack;c:\SiLabs\MCU_3\Inc)

line level    source

   1          /*!\file p2p_demo_fwd_menu.c
   2           * \brief P2P demo code on top of the EZMacPRO stack.
   3           *
   4           *
   5           * \n This software must be used in accordance with the End User License
   6           * \n Agreement.
   7           *
   8           * \b COPYRIGHT
   9           * \n Copyright 2012 Silicon Laboratories, Inc.
  10           * \n http://www.silabs.com
  11           */
  12          
  13          #include "..\..\common.h"
  14          #include "p2p_demo_fwd_node.h"
  15          #include "p2p_demo_fwd_menu.h"
  16          
  17          
  18          SEGMENT_VARIABLE(lcd_data[22], U8, APPLICATION_MSPACE);
  19          
  20          #ifdef DOG_LCD_ENABLED
              /*!
               * Display the actual menu on the LCD.
               */
              void vPerformMenu(MENU_ITEM menu_item)
              {
                  U8 temp;
              
                  switch (menu_item)
                  {
                      case sMenu_StartupScreen:
                          /* Display SiLabs startup screen. */
                          LcdClearDisplay();
                          LcdSetPictureCursor(LCD_LINE_1, 20);
                          LcdDrawPicture(silabs87x40);
                          memcpy(lcd_data, "Network Application  ", 21);
                          LcdWriteLine(LCD_LINE_7, lcd_data);
                          sprintf(lcd_data, "  P2P Demo v         ");
                          memcpy(&lcd_data[12], APP_FW_VERSION, 6);
                          LcdWriteLine(LCD_LINE_8, lcd_data);
                          break;
              
                      case sMenu_FwdScreen:
                          /* Show Fwd startup screen. */
                          LcdClearDisplay();
                          memcpy(lcd_data, "Network Application  ", 21);
                          LcdWriteLine(LCD_LINE_1, lcd_data);
                          memcpy(lcd_data, "---------------------", 21);
                          LcdWriteLine(LCD_LINE_2, lcd_data);
                          LcdWriteLine(LCD_LINE_7, lcd_data);
                          memcpy(lcd_data, "       Fwd Node      ", 21);
                          LcdWriteLine(LCD_LINE_3, lcd_data);
                          sprintf(lcd_data, "Packet content:%5u", wPacketCounter);
                          LcdWriteLine(LCD_LINE_5, lcd_data);
C51 COMPILER V7.20   P2P_DEMO_FWD_MENU                                                     01/15/2014 19:23:23 PAGE 2   

                          break;
              
                      case sMenu_FwdRefreshCounter:
                          /* Refresh number of packets that has been sent. */
                          EZMacPRO_Reg_Read(RCTRL, &temp);
                          sprintf(lcd_data, "Packet content:%5u", wPacketCounter);
                          if ((wPacketCounter == 0) && ((temp & 0x03) > 0))
                          {
                              memcpy(lcd_data, "Packet content:  ACK", 20);
                          }
                          LcdWriteLine(LCD_LINE_5, lcd_data);
                          break;
                          
                      case sMenu_PacketForward:
                          /* Show forward state. */
                          memcpy(lcd_data, " Receive    Forward *", 21);
                          LcdWriteLine(LCD_LINE_8, lcd_data);
                          break;
              
                      case sMenu_PacketReceive:
                          /* Show receive state. */
                          memcpy(lcd_data, " Receive *  Forward  ", 21);
                          LcdWriteLine(LCD_LINE_8, lcd_data);
                          break;
                  }
              }
              
              #endif //DOG_LCD_ENABLED


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     22    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
